<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Título del Archivo 2 -->
    <title>Ferremax - Herramientas y Materiales</title>
    <!-- Scripts y Links del Archivo 2 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <script src="https://checkout.wompi.co/widget.js"></script>

    <!-- Estilos CSS del Archivo 2 -->
    <style>
        :root {
            /* Colores base (Archivo 2) */
            --color-primary: #2563eb; /* Azul del archivo 2 */
            --color-primary-hover: #1d4ed8;
            --color-secondary: #059669; /* Verde del archivo 2 */
            --color-secondary-hover: #047857;
            --color-accent: #f8fafc; /* Casi blanco del archivo 2 */
            --color-price: var(--color-secondary);
            --color-success-bg: #d1fae5;
            --color-success-text: #065f46;
            --color-success-border: #a7f3d0;
            --color-dark: #1e293b; /* Gris oscuro del archivo 2 */
            --color-light: #f1f5f9; /* Gris claro del archivo 2 */
            --color-error-bg: #fee2e2;
            --color-error-text: #b91c1c;
            --color-error-border: #fecaca;
        }

        body {
            font-family: 'Poppins', 'Inter', sans-serif; /* Fuentes del archivo 2 */
            color: #334155; /* Color de texto base del archivo 2 */
            line-height: 1.6;
            position: relative;
            min-height: 100vh;
            background-color: var(--color-accent);
            display: flex; /* Para footer pegajoso */
            flex-direction: column; /* Para footer pegajoso */
        }

        .flex-grow { /* Para footer pegajoso */
             flex-grow: 1;
        }

        /* Fondo degradado del archivo 2 */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #e2e8f0 0%, #f1f5f9 100%);
            z-index: -1;
        }

        .gradient-bg {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
        }

        /* Estilos Card Producto */
        .card-img-container {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ffffff; /* Fondo blanco explícito */
            overflow: hidden;
            padding: 1rem;
            border-bottom: 1px solid #e2e8f0; /* Borde del archivo 2 */
        }

        .card-img-top {
            max-height: 100%;
            max-width: 100%;
            object-fit: contain;
            display: block;
            transition: transform 0.3s ease;
        }

        /* Estilo hover del archivo 2 */
        .product-card:hover .card-img-top {
            transform: scale(1.05);
        }
         /* Overlay sutil en hover */
        .product-card {
            position: relative;
            overflow: hidden; /* Necesario para el ::before */
            transition: all 0.3s ease;
        }
        .product-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%); /* Usa colores primario/secundario */
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0; /* Detrás del contenido */
        }
        .product-card:hover::before {
            opacity: 1;
        }
        .product-card > div { /* Asegurar que el contenido esté sobre el overlay */
            position: relative;
            z-index: 1;
        }


        .product-price {
            color: var(--color-price);
            font-weight: 600;
        }

        /* Mensajes */
        .message {
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0.5rem; /* Tailwind default: 0.375rem, Archivo 2 usa 0.5rem */
            font-weight: 500;
            display: none;
            border: 1px solid transparent;
        }
        .message-error {
            background-color: var(--color-error-bg);
            color: var(--color-error-text);
            border-color: var(--color-error-border);
        }
        .message-success {
            background-color: var(--color-success-bg);
            color: var(--color-success-text);
            border-color: var(--color-success-border);
        }

        /* Elementos Clickeables Generales */
        .clickable-product, .buy-button-grid, .category-card, .admin-action-button,
        .cta-button, .admin-nav-item, .cart-icon-container, .add-to-cart-button,
        .product-detail-link, .carousel-button, .remove-item-btn, .nav-link,
        #show-register, #show-login, #logoutButton, #logoutButtonMobile,
        #admin-menu-desktop-button {
            cursor: pointer;
            transition: all 0.2s ease; /* Transición suave del archivo 2 */
        }

        /* Detalle Producto */
        .product-detail-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem; /* Espaciado del archivo 2 */
            padding: 2rem; /* Padding del archivo 2 */
            background-color: #ffffff;
            border-radius: 1rem; /* Bordes más redondeados del archivo 2 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); /* Sombra del archivo 2 */
            max-width: 64rem; /* Ancho máximo del archivo 2 */
            margin: auto;
        }
        @media (min-width: 768px) {
            .product-detail-container {
                flex-direction: row;
                align-items: flex-start;
                padding: 2.5rem; /* Padding mayor en desktop del archivo 2 */
            }
        }

        .product-detail-image-container {
            width: 100%;
            max-width: 400px; /* Ancho imagen detalle del archivo 2 */
            flex-shrink: 0;
            display: flex;
            flex-direction: column; /* Para poner thumbnails debajo */
            align-items: center;
            gap: 1rem; /* Espacio entre imagen principal y thumbnails */
        }

        .product-detail-main-image-wrapper {
             width: 100%;
             aspect-ratio: 1 / 1; /* Mantiene proporción cuadrada */
             background-color: #ffffff;
             border-radius: 0.75rem; /* Redondeo imagen detalle del archivo 2 */
             display: flex;
             align-items: center;
             justify-content: center;
             padding: 1.5rem;
             border: 1px solid #e2e8f0;
             box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); /* Sombra suave imagen detalle */
             overflow: hidden;
             cursor: zoom-in; /* Indica que se puede ampliar */
        }

        .product-detail-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 0.5rem; /* Redondeo más pequeño para la imagen misma */
        }
        .product-detail-thumbnails {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap; /* Por si hay muchas imágenes */
            justify-content: center;
        }
        .product-detail-thumbnail {
            width: 60px;
            height: 60px;
            border: 2px solid #e2e8f0;
            border-radius: 0.375rem;
            padding: 2px;
            cursor: pointer;
            transition: border-color 0.2s ease;
            object-fit: contain;
            background-color: #ffffff;
        }
        .product-detail-thumbnail:hover,
        .product-detail-thumbnail.active {
             border-color: var(--color-primary);
        }

        .product-detail-info { flex-grow: 1; width: 100%; }

        #payment-button-container {
            margin-top: 1.5rem;
            min-height: 50px;
            position: relative;
        }
        #payment-result-message { margin-top: 0.5rem; }

        /* Títulos */
        h1, h2, h3, h4 { color: var(--color-dark); /* Color títulos archivo 2 */ font-weight: 700; }

        /* Banner Promocional */
        .promo-banner {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%); /* Degradado archivo 2 */
            color: #ffffff;
            padding: 2.5rem 1.5rem; /* Padding banner archivo 2 */
            border-radius: 1rem; /* Redondeo banner archivo 2 */
            text-align: center;
            margin-bottom: 3rem; /* Margen banner archivo 2 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); /* Sombra banner archivo 2 */
        }
        .promo-banner h3 {
            font-size: 1.75rem; /* Tamaño título banner archivo 2 */
            margin-bottom: 1rem; /* Margen título banner archivo 2 */
            color: #ffffff; /* Asegurar color blanco */
        }
        .promo-banner p {
            margin-bottom: 1.5rem; /* Margen texto banner archivo 2 */
            font-size: 1.1rem; /* Tamaño texto banner archivo 2 */
            max-width: 800px;
            margin-left: auto; margin-right: auto;
            color: #ffffff; /* Asegurar color blanco */
        }
        .promo-banner .cta-button {
            background-color: #ffffff; /* Botón blanco en banner archivo 2 */
            color: var(--color-primary); /* Texto color primario en botón banner archivo 2 */
            padding: 0.75rem 2rem; /* Padding botón banner archivo 2 */
            border-radius: 0.5rem;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease; /* Transición botón banner archivo 2 */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .promo-banner .cta-button:hover {
            background-color: #f8fafc; /* Hover botón banner archivo 2 */
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* Carrusel */
        .carousel-container {
            max-width: 900px; /* Ancho carrusel archivo 2 */
            margin: 3rem auto; /* Margen carrusel archivo 2 */
            position: relative;
            overflow: hidden;
            border-radius: 1rem; /* Redondeo carrusel archivo 2 */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* Sombra carrusel archivo 2 */
            background-color: #ffffff; /* Fondo carrusel archivo 2 */
        }
        .carousel-slides {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .carousel-slide {
            min-width: 100%;
            box-sizing: border-box;
            text-align: center;
            padding: 2rem; /* Padding slide archivo 2 */
            /* display: none; */ /* Se controla con JS o translate */
            display: flex; /* Usar flex para centrar */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 400px; /* Alto slide archivo 2 */
        }
        /* .carousel-slide.active { display: flex; } */ /* No necesario si usamos translate */
        .carousel-slide img {
            max-height: 85%; /* Altura imagen carrusel archivo 2 */
            max-width: 90%; /* Ancho imagen carrusel archivo 2 */
            object-fit: contain;
            margin-bottom: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); /* Sombra imagen carrusel */
        }
        .carousel-slide p {
            font-weight: 600; /* Peso texto carrusel archivo 2 */
            color: var(--color-dark); /* Color texto carrusel archivo 2 */
            font-size: 1.1rem; /* Tamaño texto carrusel archivo 2 */
            margin-top: auto;
        }
        .carousel-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(255, 255, 255, 0.8); /* Fondo botón carrusel archivo 2 */
            color: var(--color-dark); /* Color icono botón carrusel archivo 2 */
            border: none;
            padding: 0.75rem; /* Padding botón carrusel archivo 2 */
            border-radius: 50%;
            z-index: 10;
            font-size: 1rem;
            width: 44px; /* Tamaño botón carrusel archivo 2 */
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); /* Sombra botón carrusel */
        }
        .carousel-button:hover {
            background-color: #ffffff; /* Hover botón carrusel archivo 2 */
            transform: translateY(-50%) scale(1.1); /* Efecto hover botón carrusel */
        }
        .carousel-button.prev { left: 20px; } /* Posición botón prev archivo 2 */
        .carousel-button.next { right: 20px; } /* Posición botón next archivo 2 */

        /* Categorías */
        #categories-section { margin-top: 4rem; margin-bottom: 4rem; }
        .category-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.25rem; /* Gap categorías archivo 2 */
        }
        @media (min-width: 640px) { .category-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (min-width: 1024px) { .category-grid { grid-template-columns: repeat(6, 1fr); } }

        .category-card {
            background-color: white;
            border-radius: 0.75rem; /* Redondeo card categoría archivo 2 */
            padding: 1.75rem 1rem; /* Padding card categoría archivo 2 */
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease; /* Transición card categoría archivo 2 */
            border: 1px solid #e2e8f0; /* Borde card categoría archivo 2 */
        }
        .category-card:hover {
            transform: translateY(-5px); /* Efecto hover card categoría archivo 2 */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* Sombra hover card categoría archivo 2 */
            border-color: var(--color-primary); /* Borde hover card categoría archivo 2 */
        }
        .category-card i {
            font-size: 2.5rem; /* Tamaño icono categoría archivo 2 */
            color: var(--color-primary);
            margin-bottom: 1rem;
            display: block;
            transition: all 0.3s ease;
        }
        .category-card:hover i { transform: scale(1.1); } /* Efecto hover icono categoría archivo 2 */
        .category-card span {
            font-weight: 600;
            color: var(--color-dark); /* Color texto categoría archivo 2 */
            font-size: 0.95rem; /* Tamaño texto categoría archivo 2 */
            display: block; /* Asegura que ocupe su línea */
        }

        /* Políticas y Secciones de Texto */
        #policies-section .policy-item,
        #terms-section, #faq-section {
            background-color: white;
            padding: 2rem; /* Padding políticas archivo 2 */
            border-radius: 0.75rem; /* Redondeo políticas archivo 2 */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem; /* Margen políticas archivo 2 */
            border: 1px solid #e2e8f0; /* Borde políticas archivo 2 */
        }
         #terms-section h2, #faq-section h2 {
             font-size: 1.875rem; /* text-3xl */
             font-weight: 700;
             color: var(--color-dark);
             margin-bottom: 1.5rem;
             text-align: center;
             border-bottom: 1px solid #e2e8f0;
             padding-bottom: 1rem;
         }
         #policies-section .policy-item h3,
         #terms-section h3, #faq-section h3 {
            margin-bottom: 1rem; /* Margen título política archivo 2 */
            font-size: 1.5rem; /* Tamaño título política archivo 2 */
            font-weight: 700;
            color: var(--color-dark);
            display: flex;
            align-items: center;
         }
         #policies-section .policy-item h3 i,
         #terms-section h3 i, #faq-section h3 i {
             margin-right: 0.75rem;
             width: 24px; /* Ancho fijo para iconos */
             text-align: center;
         }
         #policies-section .policy-item p,
         #terms-section p, #faq-section p {
            color: #475569; /* Color texto política archivo 2 */
            line-height: 1.7;
            margin-bottom: 1rem; /* Espacio entre párrafos */
         }
         #faq-section details {
             margin-bottom: 1rem;
             border-bottom: 1px solid #e2e8f0;
             padding-bottom: 1rem;
         }
         #faq-section summary {
             font-weight: 600;
             cursor: pointer;
             color: var(--color-primary);
         }
         #faq-section details[open] summary {
             margin-bottom: 0.5rem;
         }


        /* Sección Admin */
        #admin-section-container {
            background-color: white;
            padding: 2rem; /* Padding admin archivo 2 */
            border-radius: 1rem; /* Redondeo admin archivo 2 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); /* Sombra admin archivo 2 */
            border: 1px solid #e2e8f0; /* Borde admin archivo 2 */
            margin-top: 2rem; /* Espacio superior */
        }
        #admin-products-section .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
        }
        #admin-products-section .admin-table th,
        #admin-products-section .admin-table td {
            border: 1px solid #e2e8f0; /* Borde tabla admin archivo 2 */
            padding: 1rem; /* Padding tabla admin archivo 2 */
            text-align: left;
            vertical-align: middle;
            font-size: 0.9rem; /* Tamaño texto tabla admin archivo 2 */
        }
        #admin-products-section .admin-table th {
            background-color: #f8fafc; /* Fondo header tabla admin archivo 2 */
            font-weight: 600;
            color: #334155; /* Color header tabla admin archivo 2 */
        }
        #admin-products-section .admin-table td { color: #475569; } /* Color celdas tabla admin archivo 2 */

        #admin-products-section .admin-table img.product-thumbnail {
            max-height: 50px;
            width: auto;
            display: block;
            margin: auto;
            background-color: #f8fafc; /* Fondo thumb admin archivo 2 */
            border-radius: 0.25rem;
            padding: 2px; /* Pequeño padding interno */
            border: 1px solid #e2e8f0; /* Borde sutil */
        }

        #admin-products-section .admin-action-button {
            padding: 0.5rem 0.8rem;
            border-radius: 0.375rem;
            font-size: 0.8rem;
            margin-right: 0.5rem;
            border: none;
            color: white;
            transition: all 0.2s ease;
            display: inline-flex; /* Para alinear icono y texto */
            align-items: center;
        }
         #admin-products-section .admin-action-button:last-child { margin-right: 0; }
         #admin-products-section .admin-action-button i { margin-right: 0.25rem; }

        #admin-products-section .edit-button { background-color: var(--color-primary); }
        #admin-products-section .edit-button:hover { background-color: var(--color-primary-hover); transform: translateY(-1px); }
        #admin-products-section .delete-button { background-color: #dc2626; } /* Rojo para borrar */
        #admin-products-section .delete-button:hover { background-color: #b91c1c; /* Rojo oscuro hover */ transform: translateY(-1px); }

        /* Formulario Admin Add/Edit */
        #admin-add-edit-product-form-container {
            background-color: #f8fafc; /* Fondo form admin archivo 2 */
            padding: 2rem;
            border-radius: 0.75rem;
            margin-top: 2rem;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        #admin-product-form label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #334155; /* Color label form admin archivo 2 */
            font-size: 0.9rem;
        }
        #admin-product-form input[type="text"],
        #admin-product-form input[type="number"],
        #admin-product-form input[type="url"], /* Para URLs */
        #admin-product-form textarea,
        #admin-product-form select {
            width: 100%;
            padding: 0.6rem 0.9rem; /* Padding inputs admin archivo 2 */
            border: 1px solid #cbd5e1; /* Borde inputs admin archivo 2 */
            border-radius: 0.5rem; /* Redondeo inputs admin archivo 2 */
            margin-bottom: 1rem;
            box-shadow: inset 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            background-color: #ffffff;
            color: #334155;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }
        #admin-product-form textarea { min-height: 100px; } /* Altura textarea admin archivo 2 */
        #admin-product-form .form-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem; /* Gap botones form admin archivo 2 */
            margin-top: 1.5rem;
        }
        #admin-product-form input:focus,
        #admin-product-form textarea:focus,
        #admin-product-form select:focus {
            outline: none;
            border-color: var(--color-secondary); /* Color borde focus archivo 2 */
            box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1); /* Sombra focus archivo 2 (usando secundario) */
        }

        /* Estilos Personalización */
        #personalize-section label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #334155;
            font-size: 0.9rem;
        }
        #personalize-section input[type="color"] {
            /* width: 100px; */ /* Ancho color picker archivo 2 */
            height: 40px;
            border: 1px solid #cbd5e1;
            border-radius: 0.5rem;
            padding: 0.25rem;
            cursor: pointer;
            vertical-align: middle;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            min-width: 50px; /* Mínimo ancho */
        }
        #personalize-section input[type="text"],
        #personalize-section textarea {
            width: 100%;
            padding: 0.6rem 0.9rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            box-shadow: inset 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            font-size: 0.9rem;
             background-color: #ffffff;
             transition: all 0.2s ease;
        }
        #personalize-section textarea { min-height: 100px; }

        #personalize-section input[type="text"]:focus,
        #personalize-section textarea:focus {
            outline: none;
            border-color: var(--color-primary); /* Color borde focus personalización archivo 2 */
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); /* Sombra focus personalización archivo 2 (usando primario) */
        }
        #personalize-section .color-input-group {
            display: flex;
            align-items: center;
            gap: 0.75rem; /* Gap color inputs archivo 2 */
            margin-bottom: 1rem; /* Espacio entre grupos de color */
        }
         #personalize-section .color-input-group label {
             margin-bottom: 0; /* Quitar margen inferior del label dentro del grupo */
             flex-shrink: 0; /* Evitar que el label se encoja */
         }

        /* Estilos Botones Generales (.btn) del archivo 2 */
        .btn {
            font-weight: 600; /* Peso botones archivo 2 */
            padding: 0.6rem 1.25rem; /* Padding botones archivo 2 */
            border-radius: 0.5rem; /* Redondeo botones archivo 2 */
            transition: all 0.3s ease; /* Transición botones archivo 2 */
            text-align: center;
            border: 1px solid transparent;
            cursor: pointer;
            font-size: 0.9rem; /* Tamaño fuente botones archivo 2 */
            display: inline-flex; /* Para alinear iconos */
            align-items: center;
            justify-content: center;
            line-height: 1.5; /* Ajuste de línea */
        }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; }
        .btn-primary {
            background-color: var(--color-primary); color: white; border-color: var(--color-primary);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); /* Sombra botón primario archivo 2 */
        }
        .btn-primary:hover:not(:disabled) {
            background-color: var(--color-primary-hover); border-color: var(--color-primary-hover);
            transform: translateY(-1px); /* Efecto hover botón primario archivo 2 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); /* Sombra hover botón primario archivo 2 */
        }
        .btn-secondary {
            background-color: var(--color-secondary); color: white; border-color: var(--color-secondary);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .btn-secondary:hover:not(:disabled) { background-color: var(--color-secondary-hover); border-color: var(--color-secondary-hover); transform: translateY(-1px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .btn-accent {
            background-color: var(--color-accent); color: #334155; /* Color texto botón accent archivo 2 */
            border: 1px solid #cbd5e1; /* Borde botón accent archivo 2 */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* Sombra botón accent archivo 2 */
        }
        .btn-accent:hover:not(:disabled) { background-color: #e2e8f0; /* Hover botón accent archivo 2 */ box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .btn-danger { background-color: #dc2626; color: white; border-color: #dc2626; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .btn-danger:hover:not(:disabled) { background-color: #b91c1c; border-color: #b91c1c; transform: translateY(-1px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .btn-gray { background-color: #64748b; color: white; border-color: #64748b; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .btn-gray:hover:not(:disabled) { background-color: #475569; border-color: #475569; transform: translateY(-1px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .btn-full { width: 100%; }

        /* Links */
        a.link-primary { color: var(--color-primary); font-weight: 600; text-decoration: none; transition: all 0.2s ease; }
        a.link-primary:hover { color: var(--color-primary-hover); text-decoration: underline; }

        /* Focus global para inputs específicos (login, registro, contacto) */
        #login-section input:focus,
        #register-section input:focus,
        #contact-section input:focus,
        #contact-section textarea:focus {
            outline: none;
            border-color: var(--color-primary) !important; /* Borde focus archivo 2 */
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1) !important; /* Sombra focus archivo 2 */
        }

        /* Carrito */
        .cart-icon-container { position: relative; display: inline-flex; align-items: center; justify-content: center; color: white; transition: all 0.2s ease; }
        .cart-icon-container:hover { transform: scale(1.1); }
        .cart-icon-container i { font-size: 1.3rem; } /* Tamaño icono carrito archivo 2 */
        .cart-item-count {
            position: absolute;
            top: -8px; /* Posición contador carrito archivo 2 */
            right: -12px; /* Posición contador carrito archivo 2 */
            background-color: var(--color-secondary); /* Fondo contador carrito archivo 2 */
            color: white;
            border-radius: 50%;
            padding: 0.2em 0.5em; /* Padding contador carrito archivo 2 */
            font-size: 0.7rem; /* Tamaño contador carrito archivo 2 */
            font-weight: bold;
            line-height: 1;
            min-width: 18px; /* Ancho mínimo contador carrito archivo 2 */
            text-align: center;
            border: 2px solid white; /* Borde contador carrito archivo 2 */
            display: none; /* Oculto por defecto, JS lo muestra */
        }
        .cart-item { display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #e2e8f0; padding: 1rem 0; flex-wrap: wrap; gap: 1rem; }
        .cart-item:last-child { border-bottom: none; }
        .cart-item img {
            width: 70px; /* Ancho imagen item carrito archivo 2 */
            height: 70px; /* Alto imagen item carrito archivo 2 */
            object-fit: contain;
            margin-right: 1rem; /* Separación imagen-texto */
            background-color: #f8fafc; /* Fondo imagen item carrito archivo 2 */
            border: 1px solid #e2e8f0; /* Borde imagen item carrito archivo 2 */
            border-radius: 0.5rem;
            padding: 0.5rem; /* Padding imagen item carrito archivo 2 */
            flex-shrink: 0;
        }
        .cart-item-details { flex-grow: 1; min-width: 150px; }
        .cart-item-actions { display: flex; align-items: center; gap: 0.75rem; flex-shrink: 0;}
        .cart-item input[type="number"] {
            width: 70px; /* Ancho input cantidad carrito archivo 2 */
            text-align: center;
            padding: 0.4rem 0.6rem; /* Padding input cantidad carrito archivo 2 */
            border: 1px solid #cbd5e1; /* Borde input cantidad carrito archivo 2 */
            border-radius: 0.5rem;
            appearance: none;
            -moz-appearance: textfield;
            box-shadow: inset 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        /* Ocultar flechas input number */
        .cart-item input[type=number]::-webkit-inner-spin-button,
        .cart-item input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }

        .remove-item-btn {
            color: #dc2626; /* Color botón eliminar archivo 2 */
            background: none; border: none; cursor: pointer;
            font-size: 1.2rem; /* Tamaño botón eliminar archivo 2 */
            padding: 0.4rem 0.6rem; /* Padding botón eliminar archivo 2 */
            line-height: 1; transition: all 0.2s ease;
        }
        .remove-item-btn:hover { color: #b91c1c; transform: scale(1.1); }

        /* Feedback botón añadir carrito */
        .btn.add-to-cart-button.added-feedback {
            background-color: var(--color-secondary) !important;
            border-color: var(--color-secondary) !important;
            /* Podrías añadir una transición o animación aquí si quieres */
        }

        /* --- Animaciones y Efectos Adicionales del Archivo 2 --- */
        /* Animación FadeIn */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }

         /* Mejoras en el header */
        .main-header {
            /* background-color: var(--color-dark); Ya aplicado con Tailwind bg-gray-900 */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease; /* Transición para scroll */
            position: sticky; /* Hacerlo sticky */
            top: 0;
            z-index: 50; /* Asegurar que esté por encima */
        }
        .main-header.scrolled { /* Clase a añadir con JS al hacer scroll */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); /* Sombra más pronunciada */
            /* background-color: rgba(30, 41, 59, 0.95); */ /* Opcional: fondo semi-transparente */
        }

         /* Mejoras en los formularios de autenticación/contacto */
        .auth-form, .contact-form { /* Clases para los contenedores de forms */
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); /* Sombra más profunda */
            border: 1px solid #e2e8f0; /* Borde sutil */
        }

         /* Mejoras en el footer */
        .main-footer {
            /* background-color: var(--color-dark); Ya aplicado con Tailwind bg-gray-900 */
            box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1); /* Sombra superior */
        }

         /* Efecto hover para botones de navegación */
        .nav-link { /* Clase para los enlaces <a> del nav principal */
            position: relative;
            padding-bottom: 4px; /* Espacio para el subrayado */
             text-decoration: none !important; /* Asegurar que no haya subrayado por defecto */
        }
        .nav-link::after { /* Subrayado animado */
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: white; /* O color primario si el fondo no es oscuro */
            transition: width 0.3s ease;
        }
        .nav-link:hover::after { width: 100%; }

         /* Mejoras en el carrito (resumen) */
        .cart-summary { /* Clase para el div de resumen del carrito */
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        /* Efecto de carga simple */
        .loading-spinner, .loading-spinner-dark {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            animation: spin 1s ease-in-out infinite;
            vertical-align: middle; /* Alinear con texto */
        }
         .loading-spinner { /* Para fondos oscuros */
             border: 3px solid rgba(255, 255, 255, 0.3); /* Spinner claro */
             border-top-color: white; /* Color principal del spinner */
         }
         .loading-spinner-dark { /* Para fondos claros */
             border: 3px solid rgba(0, 0, 0, 0.1);
             border-top-color: var(--color-primary); /* O color oscuro deseado */
         }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* Estilos para el Modal Lightbox */
        #image-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none; /* Oculto por defecto */
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Muy alto para estar encima de todo */
            padding: 20px;
            box-sizing: border-box;
        }
        #image-modal.active {
            display: flex;
        }
        #image-modal img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            display: block;
        }
        #image-modal .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
         #image-modal .close-modal:hover {
             transform: scale(1.1);
             color: #ccc;
         }

    </style>
</head>

<!-- Body y Estructura HTML del Archivo 2 -->
<body class="flex flex-col min-h-screen"> <!-- Clases para footer pegajoso -->

    <div class="flex-grow"> <!-- Div para contenido principal -->

        <!-- Sección de Login -->
        <section id="login-section" class="container mx-auto mt-12 p-8 max-w-md bg-white rounded-xl shadow-lg auth-form">
            <!-- ... (contenido login sin cambios) ... -->
             <div class="text-center mb-8">
                <img src="https://placehold.co/100x100/2563eb/ffffff?text=F" alt="Ferremax Logo" class="mx-auto h-16 w-16 rounded-full mb-4">
                <h2 class="text-3xl font-bold text-gray-800">Iniciar Sesión</h2>
                <p class="text-gray-600 mt-2">Accede a tu cuenta para continuar</p>
            </div>
            <div id="login-message" class="message"></div>
             <form id="loginForm" class="space-y-6">
                 <div>
                     <label for="login-email" class="block text-gray-700 text-sm font-semibold mb-2">Correo Electrónico</label>
                     <div class="relative">
                         <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                             <i class="fas fa-envelope text-gray-400"></i>
                         </div>
                         <input type="email" id="login-email" class="pl-10 w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="tu@email.com" required>
                     </div>
                 </div>
                 <div>
                     <label for="login-password" class="block text-gray-700 text-sm font-semibold mb-2">Contraseña</label>
                     <div class="relative">
                          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                              <i class="fas fa-lock text-gray-400"></i>
                          </div>
                         <input type="password" id="login-password" class="pl-10 w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="********" required>
                     </div>
                 </div>
                 <div class="flex items-center justify-between">
                     <div class="flex items-center">
                         <input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                         <label for="remember-me" class="ml-2 block text-sm text-gray-700">Recordarme</label>
                     </div>
                     <div class="text-sm">
                         <a href="#" class="font-medium text-blue-600 hover:text-blue-500">¿Olvidaste tu contraseña?</a>
                     </div>
                 </div>
                 <div>
                      <button type="submit" class="w-full btn btn-primary py-3">
                          Iniciar Sesión
                      </button>
                 </div>
             </form>
             <div class="mt-6">
                 <div class="relative">
                     <div class="absolute inset-0 flex items-center"> <div class="w-full border-t border-gray-300"></div> </div>
                     <div class="relative flex justify-center text-sm"> <span class="px-2 bg-white text-gray-500">¿No tienes cuenta?</span> </div>
                 </div>
                 <div class="mt-6">
                     <button id="show-register" class="w-full btn btn-accent">
                         Regístrate
                     </button>
                 </div>
             </div>
        </section>

        <!-- Sección de Registro -->
        <section id="register-section" class="container mx-auto mt-12 p-8 max-w-md bg-white rounded-xl shadow-lg auth-form" style="display: none;">
             <!-- ... (contenido registro sin cambios) ... -->
             <div class="text-center mb-8">
                 <img src="https://placehold.co/100x100/2563eb/ffffff?text=F" alt="Ferremax Logo" class="mx-auto h-16 w-16 rounded-full mb-4">
                 <h2 class="text-3xl font-bold text-gray-800">Crear Cuenta</h2>
                 <p class="text-gray-600 mt-2">Regístrate para comenzar</p>
             </div>
             <div id="register-message" class="message"></div>
             <form id="registerForm" class="space-y-6">
                  <div>
                      <label for="register-username" class="block text-gray-700 text-sm font-semibold mb-2">Nombre de Usuario</label>
                      <div class="relative">
                          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"> <i class="fas fa-user text-gray-400"></i> </div>
                          <input type="text" id="register-username" class="pl-10 w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Tu Usuario" required>
                      </div>
                  </div>
                  <div>
                      <label for="register-email" class="block text-gray-700 text-sm font-semibold mb-2">Correo Electrónico</label>
                       <div class="relative">
                           <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"> <i class="fas fa-envelope text-gray-400"></i> </div>
                           <input type="email" id="register-email" class="pl-10 w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="tu@email.com" required>
                       </div>
                  </div>
                  <div>
                       <label for="register-password" class="block text-gray-700 text-sm font-semibold mb-2">Contraseña</label>
                       <div class="relative">
                           <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"> <i class="fas fa-lock text-gray-400"></i> </div>
                            <input type="password" id="register-password" class="pl-10 w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Mín 6 caracteres" required minlength="6">
                       </div>
                       <p class="mt-1 text-xs text-gray-500">La contraseña debe tener al menos 6 caracteres.</p>
                  </div>
                  <div class="flex items-center">
                       <input id="terms" name="terms" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" required>
                       <label for="terms" class="ml-2 block text-sm text-gray-700"> Acepto los <a href="#" class="text-blue-600 hover:text-blue-500 admin-nav-item" data-section="terms">Términos y Condiciones</a> </label>
                  </div>
                  <div>
                       <button type="submit" class="w-full btn btn-secondary py-3">
                           Registrarse
                       </button>
                  </div>
             </form>
             <div class="mt-6 text-center text-sm">
                 <p class="text-gray-600">¿Ya tienes cuenta?
                      <button id="show-login" class="font-medium text-blue-600 hover:text-blue-500">Inicia sesión</button>
                 </p>
            </div>
        </section>

        <!-- Contenido Principal (después de login) -->
        <section id="main-content" style="display: none;">
            <!-- Header del Archivo 2 -->
            <header class="main-header bg-gray-900 text-white shadow-lg">
                 <!-- ... (contenido header sin cambios funcionales) ... -->
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                     <div class="flex items-center justify-between h-20">
                         <div class="flex items-center">
                             <img src="https://placehold.co/40x40/2563eb/ffffff?text=F" alt="Logo Ferremax" class="h-10 w-10 rounded-full mr-3">
                             <h1 class="text-2xl sm:text-3xl font-bold">Ferremax</h1>
                         </div>
                         <nav class="hidden sm:flex sm:items-center sm:space-x-6">
                             <a href="#" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-800 admin-nav-item" data-section="home">Inicio</a>
                             <a href="#" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-800 admin-nav-item" data-section="products">Productos</a>
                             <a href="#" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-800 admin-nav-item cart-icon-container relative" data-section="cart" title="Ver Carrito">
                                  <i class="fas fa-shopping-cart text-xl"></i>
                                  <span id="cart-item-count-desktop" class="cart-item-count" style="display: none;">0</span>
                             </a>
                             <a href="#" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-800 admin-nav-item" data-section="contact">Contacto</a>
                             <a href="#" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-800 admin-nav-item" data-section="policies">Políticas</a>
                              <!-- Menú Admin Desktop -->
                              <div id="admin-menu-desktop-container" class="relative" style="display: none;">
                                   <button id="admin-menu-desktop-button" class="btn btn-primary px-4 py-2 text-sm font-medium flex items-center">
                                       Administración <i class="fas fa-caret-down ml-2"></i>
                                   </button>
                                   <div id="admin-menu-desktop-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200">
                                        <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 admin-nav-item" data-section="admin-products"> <i class="fas fa-boxes w-4 mr-2"></i> Productos </a>
                                        <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 admin-nav-item" data-section="admin-personalize"> <i class="fas fa-paint-brush w-4 mr-2"></i> Personalizar </a>
                                   </div>
                              </div>
                              <!-- Botón Logout Desktop -->
                              <button id="logoutButton" class="btn btn-danger py-2 px-4 text-sm ml-2 flex items-center">
                                  <i class="fas fa-sign-out-alt mr-2"></i> Salir
                              </button>
                         </nav>
                          <!-- Botones Menú Móvil y Carrito -->
                          <div class="sm:hidden flex items-center">
                              <a href="#" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white admin-nav-item cart-icon-container relative mr-3" data-section="cart" title="Ver Carrito">
                                   <i class="fas fa-shopping-cart text-xl"></i>
                                   <span id="cart-item-count-mobile-icon" class="cart-item-count" style="display: none;">0</span>
                              </a>
                              <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-controls="mobile-menu" aria-expanded="false">
                                   <span class="sr-only">Abrir menú</span>
                                   <!-- Icono Hamburguesa -->
                                   <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /> </svg>
                                   <!-- Icono X -->
                                   <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /> </svg>
                              </button>
                          </div>
                     </div>
                </div>
                 <!-- Menú móvil -->
                 <div class="sm:hidden hidden bg-gray-800" id="mobile-menu">
                      <div class="px-2 pt-2 pb-3 space-y-1">
                           <a href="#" class="flex items-center px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 admin-nav-item" data-section="home"> <i class="fas fa-home w-5 mr-2"></i> Inicio </a>
                           <a href="#" class="flex items-center px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 admin-nav-item" data-section="products"> <i class="fas fa-tools w-5 mr-2"></i> Productos </a>
                           <a href="#" class="flex items-center px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 admin-nav-item" data-section="cart">
                                <i class="fas fa-shopping-cart w-5 mr-2"></i> Carrito
                                <span id="cart-item-count-mobile-menu" class="cart-item-count inline-block ml-2 align-middle" style="display: none;">0</span>
                           </a>
                           <a href="#" class="flex items-center px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 admin-nav-item" data-section="contact"> <i class="fas fa-envelope w-5 mr-2"></i> Contacto </a>
                           <a href="#" class="flex items-center px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 admin-nav-item" data-section="policies"> <i class="fas fa-file-alt w-5 mr-2"></i> Políticas </a>
                            <!-- Menú Admin Móvil -->
                            <div id="admin-menu-mobile-container" class="pt-2 border-t border-gray-700 mt-2" style="display: none;">
                                 <span class="block px-3 pt-2 pb-1 text-xs font-semibold text-gray-400 uppercase">Administración</span>
                                 <a href="#" class="flex items-center px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 admin-nav-item" data-section="admin-products"> <i class="fas fa-boxes w-5 mr-2"></i> Productos </a>
                                 <a href="#" class="flex items-center px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 admin-nav-item" data-section="admin-personalize"> <i class="fas fa-paint-brush w-5 mr-2"></i> Personalizar </a>
                            </div>
                            <!-- Botón Logout móvil -->
                            <button id="logoutButtonMobile" class="w-full text-left flex items-center px-3 py-2 rounded-md text-base font-medium btn btn-danger mt-3">
                                 <i class="fas fa-sign-out-alt mr-2"></i> Cerrar Sesión
                            </button>
                      </div>
                 </div>
            </header>

            <!-- Contenido de la página -->
            <main class="container mx-auto mt-8 mb-12 px-4 sm:px-6" id="page-content">

                <!-- Sección de Inicio -->
                <div id="home-section" style="display: none;">
                    <!-- ... (contenido home sin cambios funcionales, títulos/textos se actualizan desde JS) ... -->
                    <div class="text-center mb-12 fade-in">
                         <h2 id="main-welcome-title" class="text-4xl font-bold text-gray-800 mb-4">Bienvenido a Ferremax</h2>
                         <p class="text-xl text-gray-600 max-w-3xl mx-auto">Tu ferretería de confianza con los mejores productos y precios</p>
                    </div>
                    <div class="promo-banner fade-in" style="animation-delay: 0.2s;">
                         <h3 id="main-promo-title">¡Ofertas Especiales de Temporada!</h3>
                         <p id="main-promo-text">Descubre increíbles descuentos en herramientas profesionales y materiales de construcción. Aprovecha estas ofertas por tiempo limitado.</p>
                         <button class="cta-button admin-nav-item" data-section="products"> <i class="fas fa-arrow-right mr-2"></i> Ver Ofertas </button>
                    </div>
                     <div class="max-w-4xl mx-auto text-center mb-16 fade-in" style="animation-delay: 0.4s;">
                         <p class="text-gray-600 text-lg">Desde 1999, Ferretería Ferremax ha sido un pilar en la industria de la construcción. Fundada por la familia Rodríguez, nuestra empresa ha crecido de una pequeña tienda local a un referente en calidad y servicio en la región. Nuestro compromiso es ofrecer productos de alta calidad y un servicio excepcional.</p>
                     </div>
                     <!-- Carrusel -->
                      <div class="carousel-container fade-in" style="animation-delay: 0.6s;">
                          <div class="carousel-slides"></div>
                          <button class="carousel-button prev"><i class="fas fa-chevron-left"></i></button>
                          <button class="carousel-button next"><i class="fas fa-chevron-right"></i></button>
                      </div>
                      <!-- Categorías -->
                      <section id="categories-section" class="mt-16 fade-in" style="animation-delay: 0.8s;">
                           <h3 class="text-3xl font-bold text-gray-800 mb-10 text-center">Explora por Categoría</h3>
                           <div id="category-grid-container" class="category-grid"></div>
                      </section>
                      <!-- Productos Destacados -->
                      <div class="mt-20 fade-in" style="animation-delay: 1s;">
                           <h3 class="text-3xl font-bold text-gray-800 mb-10 text-center">Productos Destacados</h3>
                           <div id="featured-products-container" class="grid grid-cols-1 md:grid-cols-3 gap-8"></div>
                      </div>
                </div>

                <!-- Sección de Productos -->
                <div id="products-section" style="display: none;">
                     <!-- El contenido (grid o detalle) se renderiza aquí por JS -->
                     <!-- Título y Búsqueda (Opcional) -->
                    <div class="flex flex-col md:flex-row justify-between items-center mb-10">
                        <h2 class="text-3xl font-bold text-gray-800 mb-4 md:mb-0">Nuestros Productos</h2>
                        <div class="relative w-full md:w-64">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"> <i class="fas fa-search text-gray-400"></i> </div>
                            <input type="text" placeholder="Buscar productos..." class="pl-10 w-full py-2 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                     <!-- Área para Grid o Detalle -->
                    <div id="products-display-area">
                        <p class="col-span-full text-center text-gray-500 p-4">Cargando productos...</p>
                    </div>
                </div>

                <!-- Sección de Carrito -->
                <div id="cart-section" style="display: none;">
                     <!-- ... (contenido carrito sin cambios funcionales) ... -->
                    <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Tu Carrito de Compras</h2>
                     <div class="max-w-5xl mx-auto">
                          <div id="cart-message" class="message mb-6"></div>
                          <div id="cart-items-container" class="bg-white p-6 rounded-xl shadow-md mb-8">
                              <p class="text-center text-gray-500 py-6">Tu carrito está vacío.</p>
                          </div>
                           <div id="cart-summary-and-checkout" class="cart-summary p-6 rounded-xl shadow-md" style="display: none;">
                               <h3 class="text-xl font-semibold text-gray-800 mb-6 text-center border-b pb-4">Resumen del Pedido</h3>
                               <div class="space-y-4 mb-6">
                                   <div class="flex justify-between"> <span class="text-gray-700">Subtotal:</span> <span id="cart-subtotal" class="font-bold">$0.00</span> </div>
                                   <div class="flex justify-between"> <span class="text-gray-700">Envío:</span> <span class="font-bold">Gratis</span> </div>
                                   <div class="flex justify-between border-t pt-4"> <span class="text-xl text-gray-800 font-semibold">Total:</span> <span id="cart-total" class="text-2xl font-bold text-blue-600">$0.00</span> </div>
                               </div>
                               <div id="payment-button-container" class="mt-6 min-h-[50px] relative">
                                   <button id="checkout-button" class="w-full btn btn-primary py-3 px-6 text-lg"> <i class="fas fa-credit-card mr-2"></i> Proceder al Pago </button>
                                   <p id="payment-result-message" class="message mt-4 text-center"></p>
                               </div>
                           </div>
                           <div class="text-center mt-8">
                                <button class="btn btn-gray admin-nav-item" data-section="products"> <i class="fas fa-arrow-left mr-2"></i> Seguir Comprando </button>
                           </div>
                     </div>
                </div>

                <!-- Sección de Contacto -->
                <div id="contact-section" style="display: none;">
                    <div class="max-w-4xl mx-auto">
                        <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Contáctanos</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <!-- Formulario Contacto -->
                            <div class="bg-white p-8 rounded-xl shadow-lg contact-form">
                                <h3 class="text-xl font-semibold text-gray-800 mb-6">Envía un mensaje</h3>
                                <form id="contactForm" class="space-y-6">
                                    <div id="contact-message-response" class="message mb-4"></div>
                                    <div> <label for="contact-name" class="block text-gray-700 text-sm font-semibold mb-2">Nombre Completo</label> <input type="text" id="contact-name" name="name" class="w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required> </div>
                                    <div> <label for="contact-email" class="block text-gray-700 text-sm font-semibold mb-2">Correo Electrónico</label> <input type="email" id="contact-email" name="email" class="w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required> </div>
                                    <div> <label for="contact-subject" class="block text-gray-700 text-sm font-semibold mb-2">Asunto</label> <input type="text" id="contact-subject" name="subject" class="w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required> </div>
                                    <div> <label for="contact-message" class="block text-gray-700 text-sm font-semibold mb-2">Mensaje</label> <textarea id="contact-message" name="message" rows="5" class="w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea> </div>
                                    <div> <button type="submit" id="contactSubmitButton" class="w-full btn btn-primary py-3"> Enviar Mensaje </button> </div>
                                </form>
                            </div>
                            <!-- Info Contacto -->
                            <div class="bg-white p-8 rounded-xl shadow-lg contact-form">
                                <h3 class="text-xl font-semibold text-gray-800 mb-6">Información de Contacto</h3>
                                <div class="space-y-6">
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600"> <i class="fas fa-map-marker-alt"></i> </div>
                                        <div class="ml-4">
                                            <h4 class="text-lg font-semibold text-gray-800">Dirección</h4>
                                            <!-- CHANGED: Dirección actualizada -->
                                            <p class="mt-1 text-gray-600">Calle Principal #123, Barranquilla</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600"> <i class="fas fa-phone-alt"></i> </div>
                                        <div class="ml-4">
                                            <h4 class="text-lg font-semibold text-gray-800">Teléfono</h4>
                                            <p class="mt-1 text-gray-600">+57 123 456 7890</p>
                                            <p class="mt-1 text-gray-600 text-sm">Lunes a Viernes: 8am - 6pm</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start">
                                         <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600"> <i class="fas fa-envelope"></i> </div>
                                         <div class="ml-4">
                                             <h4 class="text-lg font-semibold text-gray-800">Correo Electrónico</h4>
                                             <p class="mt-1 text-gray-600 break-all">contacto@ferremax.com</p>
                                         </div>
                                    </div>
                                     <div class="flex items-start">
                                          <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600"> <i class="fas fa-clock"></i> </div>
                                          <div class="ml-4">
                                              <h4 class="text-lg font-semibold text-gray-800">Horario de Atención</h4>
                                              <p class="mt-1 text-gray-600">Lunes a Viernes: 8am - 6pm</p>
                                              <p class="mt-1 text-gray-600">Sábados: 9am - 2pm</p>
                                          </div>
                                     </div>
                                </div>
                                <!-- Redes Sociales -->
                                <div class="mt-8">
                                     <h4 class="text-lg font-semibold text-gray-800 mb-4">Síguenos en redes sociales</h4>
                                     <div class="flex space-x-4">
                                         <a href="#" class="h-10 w-10 rounded-full bg-blue-600 text-white flex items-center justify-center hover:bg-blue-700 transition duration-150 ease-in-out" title="Facebook"> <i class="fab fa-facebook-f"></i> </a>
                                         <a href="#" class="h-10 w-10 rounded-full bg-blue-400 text-white flex items-center justify-center hover:bg-blue-500 transition duration-150 ease-in-out" title="Twitter"> <i class="fab fa-twitter"></i> </a>
                                         <a href="#" class="h-10 w-10 rounded-full bg-pink-600 text-white flex items-center justify-center hover:bg-pink-700 transition duration-150 ease-in-out" title="Instagram"> <i class="fab fa-instagram"></i> </a>
                                         <a href="#" class="h-10 w-10 rounded-full bg-red-600 text-white flex items-center justify-center hover:bg-red-700 transition duration-150 ease-in-out" title="YouTube"> <i class="fab fa-youtube"></i> </a>
                                     </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección de Políticas -->
                <div id="policies-section" style="display: none;">
                    <div class="max-w-4xl mx-auto">
                        <h2 class="text-3xl font-bold text-gray-800 mb-10 text-center">Políticas de la Empresa</h2>
                         <div class="space-y-6">
                              <div class="policy-item fade-in">
                                  <h3 class="text-2xl font-semibold mb-4 flex items-center"> <i class="fas fa-lock text-blue-600 mr-3"></i> Política de Privacidad </h3>
                                  <p>En Ferretería Ferremax, nos tomamos muy en serio la privacidad de nuestros clientes...</p>
                              </div>
                               <div class="policy-item fade-in" style="animation-delay: 0.1s;">
                                   <h3 class="text-2xl font-semibold mb-4 flex items-center"> <i class="fas fa-exchange-alt text-green-600 mr-3"></i> Política de Devoluciones </h3>
                                   <p>Ofrecemos un período de 30 días para devoluciones...</p>
                               </div>
                               <div class="policy-item fade-in" style="animation-delay: 0.2s;">
                                    <h3 class="text-2xl font-semibold mb-4 flex items-center"> <i class="fas fa-truck text-orange-500 mr-3"></i> Política de Envío </h3>
                                    <p>Realizamos envíos a nivel nacional...</p>
                               </div>
                               <div class="policy-item fade-in" style="animation-delay: 0.3s;">
                                    <h3 class="text-2xl font-semibold mb-4 flex items-center"> <i class="fas fa-shield-alt text-purple-600 mr-3"></i> Política de Seguridad </h3>
                                    <p>Utilizamos tecnología de encriptación avanzada...</p>
                               </div>
                                <div class="policy-item fade-in" style="animation-delay: 0.4s;">
                                     <h3 class="text-2xl font-semibold mb-4 flex items-center"> <i class="fas fa-headset text-red-500 mr-3"></i> Política de Atención al Cliente </h3>
                                     <p>Nos comprometemos a ofrecer un excelente servicio al cliente...</p>
                                </div>
                         </div>
                    </div>
                </div>

                 <!-- CHANGED: Sección de Términos y Condiciones -->
                 <section id="terms-section" class="max-w-4xl mx-auto" style="display: none;">
                     <h2>Términos y Condiciones</h2>
                     <p>Bienvenido a Ferremax. Al utilizar nuestro sitio web y realizar compras, aceptas los siguientes términos y condiciones:</p>
                     <h3>1. Uso del Sitio Web</h3>
                     <p>El contenido y diseño de este sitio web son propiedad de Ferremax y están protegidos por leyes de derechos de autor. Se prohíbe la reproducción no autorizada.</p>
                     <h3>2. Precios y Pagos</h3>
                     <p>Todos los precios están indicados en Pesos Colombianos (COP) e incluyen los impuestos aplicables. Nos reservamos el derecho de modificar los precios en cualquier momento. Aceptamos pagos a través de la plataforma Wompi.</p>
                     <h3>3. Envíos y Entregas</h3>
                     <p>Consulta nuestra <a href="#" class="link-primary admin-nav-item" data-section="policies">Política de Envío</a> para obtener detalles sobre costos, tiempos y zonas de cobertura.</p>
                     <h3>4. Devoluciones y Reembolsos</h3>
                     <p>Consulta nuestra <a href="#" class="link-primary admin-nav-item" data-section="policies">Política de Devoluciones</a> para conocer el proceso y condiciones.</p>
                     <h3>5. Privacidad</h3>
                     <p>Tu privacidad es importante. Consulta nuestra <a href="#" class="link-primary admin-nav-item" data-section="policies">Política de Privacidad</a>.</p>
                     <p><em>Última actualización: [Fecha Actual]</em></p>
                 </section>

                 <!-- CHANGED: Sección de Preguntas Frecuentes -->
                 <section id="faq-section" class="max-w-4xl mx-auto" style="display: none;">
                     <h2>Preguntas Frecuentes (FAQ)</h2>
                     <details>
                         <summary>¿Cómo puedo realizar un pedido?</summary>
                         <p>Simplemente navega por nuestro catálogo, añade los productos deseados a tu carrito y procede al pago a través del botón "Proceder al Pago". Seguirás las instrucciones de la plataforma segura Wompi.</p>
                     </details>
                     <details>
                         <summary>¿Qué métodos de pago aceptan?</summary>
                         <p>Aceptamos todos los métodos de pago disponibles a través de Wompi, incluyendo tarjetas de crédito, débito (PSE), Nequi, Daviplata, transferencias bancarias y efectivo en puntos autorizados.</p>
                     </details>
                     <details>
                         <summary>¿Cuánto tarda en llegar mi pedido?</summary>
                         <p>Los tiempos de entrega varían entre 3 y 7 días hábiles, dependiendo de tu ubicación. Recibirás información de seguimiento una vez que tu pedido sea despachado.</p>
                     </details>
                      <details>
                          <summary>¿Cuál es el costo de envío?</summary>
                          <p>El costo de envío se calcula automáticamente durante el proceso de compra, basado en la dirección de entrega y el peso/volumen del pedido. A veces ofrecemos promociones de envío gratuito.</p>
                      </details>
                     <details>
                         <summary>¿Puedo devolver un producto?</summary>
                         <p>Sí, tienes 30 días para devolver productos defectuosos o si no estás satisfecho, siempre que cumplan las condiciones de nuestra <a href="#" class="link-primary admin-nav-item" data-section="policies">Política de Devoluciones</a>. Por favor, contáctanos para iniciar el proceso.</p>
                     </details>
                      <details>
                          <summary>¿Cómo contacto con atención al cliente?</summary>
                          <p>Puedes usar el formulario en nuestra sección de <a href="#" class="link-primary admin-nav-item" data-section="contact">Contacto</a> o escribirnos a contacto@ferremax.com. Nuestro horario de atención es de Lunes a Viernes de 8am a 6pm y Sábados de 9am a 2pm.</p>
                      </details>
                 </section>

                <!-- Sección de Administración -->
                <div id="admin-section-container" class="mt-8 mb-12" style="display: none;">
                    <!-- Sección de Productos Admin -->
                    <div id="admin-products-section" style="display: none;">
                         <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                             <h2 class="text-3xl font-bold text-gray-800 mb-4 md:mb-0">Panel de Administración - Productos</h2>
                             <button id="add-product-button" class="btn btn-primary flex items-center"> <i class="fas fa-plus mr-2"></i> Añadir Producto </button>
                         </div>
                         <!-- Formulario Añadir/Editar Producto -->
                          <div id="admin-add-edit-product-form-container" style="display: none;" class="mb-8">
                              <h3 id="admin-form-title" class="text-2xl font-semibold text-gray-800 mb-6">Añadir/Editar Producto</h3>
                              <form id="admin-product-form">
                                   <input type="hidden" id="admin-product-id" name="productId">
                                   <div id="admin-product-form-message" class="message mb-4"></div>
                                   <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div> <label for="admin-product-name">Nombre (*)</label> <input type="text" id="admin-product-name" name="Nombre" required> </div>
                                        <div> <label for="admin-product-brand">Marca (*)</label> <input type="text" id="admin-product-brand" name="Marca" required> </div>
                                        <div> <label for="admin-product-price">Precio (*)</label> <input type="number" id="admin-product-price" name="precio_unitario" required step="0.01" min="0"> </div>
                                        <div> <label for="admin-product-quantity">Cantidad (*)</label> <input type="number" id="admin-product-quantity" name="cantidad" required step="1" min="0"> </div>
                                        <div class="md:col-span-2"> <label for="admin-product-description">Descripción</label> <textarea id="admin-product-description" name="Descripcion"></textarea> </div>
                                        <div> <label for="admin-product-category">Categoría</label> <select id="admin-product-category" name="ID_Categoria"> <option value="">-- Selecciona Categoría --</option> </select> </div>
                                        <div> <label for="admin-product-barcode">Cód. Barras</label> <input type="text" id="admin-product-barcode" name="Codigo_Barras"> </div>
                                        <!-- CHANGED: Añadir inputs para las 5 imágenes -->
                                        <div class="md:col-span-2"> <label for="admin-product-image-url">URL Imagen Principal</label> <input type="url" id="admin-product-image-url" name="imagen_url" placeholder="https://ejemplo.com/imagen.jpg"> <p class="text-xs text-gray-500 mt-1">Pega la URL completa de la imagen.</p> </div>
                                        <div> <label for="admin-product-image-url2">URL Imagen 2</label> <input type="url" id="admin-product-image-url2" name="imagen_url2"> </div>
                                        <div> <label for="admin-product-image-url3">URL Imagen 3</label> <input type="url" id="admin-product-image-url3" name="imagen_url3"> </div>
                                        <div> <label for="admin-product-image-url4">URL Imagen 4</label> <input type="url" id="admin-product-image-url4" name="imagen_url4"> </div>
                                        <div> <label for="admin-product-image-url5">URL Imagen 5</label> <input type="url" id="admin-product-image-url5" name="imagen_url5"> </div>
                                   </div>
                                   <div class="form-buttons">
                                        <button type="button" id="admin-cancel-edit-product" class="btn btn-gray">Cancelar</button>
                                        <button type="submit" id="admin-save-product-button" class="btn btn-primary">Guardar</button>
                                   </div>
                              </form>
                          </div>
                         <!-- Lista de Productos Admin -->
                          <div id="admin-product-list-container">
                              <div id="admin-products-message" class="message mb-4"></div>
                              <div id="admin-products-table-container" class="overflow-x-auto bg-white rounded-lg shadow">
                                  <p class="p-4 text-center text-gray-500">Cargando productos...</p>
                              </div>
                          </div>
                    </div>

                    <!-- Sección de Personalización Admin -->
                     <div id="admin-personalize-section" style="display: none;">
                          <h2 class="text-3xl font-bold text-gray-800 mb-8">Panel de Administración - Personalizar Sitio</h2>
                          <div id="admin-personalize-message" class="message mb-6"></div>
                          <form id="personalize-form">
                               <div class="bg-white p-8 rounded-xl shadow-md space-y-8 border border-gray-200">
                                    <!-- Sección Colores -->
                                     <div>
                                         <h3 class="text-xl font-semibold text-gray-700 mb-6 border-b pb-2">Colores Principales</h3>
                                         <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                                             <div class="color-input-group"> <label for="setting-colorPrimary" class="mr-2">Primario:</label> <input type="color" id="setting-colorPrimary" name="colorPrimary" value="#2563eb"> </div>
                                             <div class="color-input-group"> <label for="setting-colorSecondary" class="mr-2">Secundario:</label> <input type="color" id="setting-colorSecondary" name="colorSecondary" value="#059669"> </div>
                                             <div class="color-input-group"> <label for="setting-colorAccent" class="mr-2">Acento:</label> <input type="color" id="setting-colorAccent" name="colorAccent" value="#f8fafc"> </div>
                                         </div>
                                         <div class="mt-8 text-right"> <button type="button" id="save-colors-button" class="btn btn-primary">Guardar Colores</button> </div>
                                    </div>
                                    <!-- Sección Textos -->
                                     <div>
                                         <h3 class="text-xl font-semibold text-gray-700 mb-6 border-b pb-2">Textos Clave</h3>
                                         <div class="space-y-6">
                                             <div> <label for="setting-welcomeTitle">Título Bienvenida (Home)</label> <input type="text" id="setting-welcomeTitle" name="welcomeTitle" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"> </div>
                                             <div> <label for="setting-promoBannerTitle">Título Banner Promocional</label> <input type="text" id="setting-promoBannerTitle" name="promoBannerTitle" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"> </div>
                                             <div> <label for="setting-promoBannerText">Texto Banner Promocional</label> <textarea id="setting-promoBannerText" name="promoBannerText" rows="3" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"></textarea> </div>
                                         </div>
                                         <div class="mt-8 text-right"> <button type="button" id="save-texts-button" class="btn btn-primary">Guardar Textos</button> </div>
                                     </div>
                               </div>
                          </form>
                     </div>
                </div>

            </main>
        </section>

    </div> <!-- End flex-grow -->

     <!-- Footer del Archivo 2 -->
     <footer class="main-footer bg-gray-900 text-white py-8 mt-auto"> <!-- mt-auto para footer pegajoso -->
          <div class="container mx-auto px-4 sm:px-6 lg:px-8">
              <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                  <!-- Columna 1 -->
                  <div>
                       <h3 class="text-lg font-semibold mb-4">Ferremax</h3>
                       <p class="text-gray-400 text-sm">Tu ferretería de confianza con los mejores productos y precios.</p>
                       <div class="flex space-x-4 mt-4">
                            <a href="#" class="text-gray-400 hover:text-white" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" class="text-gray-400 hover:text-white" title="Twitter"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="text-gray-400 hover:text-white" title="Instagram"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="text-gray-400 hover:text-white" title="YouTube"><i class="fab fa-youtube"></i></a>
                       </div>
                  </div>
                  <!-- Columna 2: Enlaces Rápidos -->
                  <div>
                       <h4 class="text-md font-semibold mb-4">Enlaces Rápidos</h4>
                       <ul class="space-y-2">
                            <li><a href="#" class="text-gray-400 hover:text-white text-sm admin-nav-item" data-section="home">Inicio</a></li>
                            <li><a href="#" class="text-gray-400 hover:text-white text-sm admin-nav-item" data-section="products">Productos</a></li>
                            <li><a href="#" class="text-gray-400 hover:text-white text-sm admin-nav-item" data-section="cart">Carrito</a></li>
                             <li><a href="#" class="text-gray-400 hover:text-white text-sm admin-nav-item" data-section="contact">Contacto</a></li>
                       </ul>
                  </div>
                  <!-- Columna 3: Información -->
                  <div>
                       <h4 class="text-md font-semibold mb-4">Información</h4>
                       <ul class="space-y-2">
                            <li><a href="#" class="text-gray-400 hover:text-white text-sm admin-nav-item" data-section="policies">Políticas</a></li>
                            <!-- CHANGED: Enlaces a secciones T&C y FAQ -->
                            <li><a href="#" class="text-gray-400 hover:text-white text-sm admin-nav-item" data-section="terms">Términos y Condiciones</a></li>
                            <li><a href="#" class="text-gray-400 hover:text-white text-sm admin-nav-item" data-section="faq">Preguntas Frecuentes</a></li>
                       </ul>
                  </div>
                  <!-- Columna 4: Contacto -->
                   <div>
                        <h4 class="text-md font-semibold mb-4">Contacto</h4>
                        <!-- CHANGED: Dirección actualizada -->
                        <p class="text-gray-400 text-sm mb-2 flex items-start"><i class="fas fa-map-marker-alt w-4 mr-2 mt-1 flex-shrink-0"></i> <span>Calle Principal #123, Barranquilla</span></p>
                        <p class="text-gray-400 text-sm mb-2 flex items-start"><i class="fas fa-phone-alt w-4 mr-2 mt-1 flex-shrink-0"></i> <span>+57 123 456 7890</span></p>
                        <p class="text-gray-400 text-sm flex items-start"><i class="fas fa-envelope w-4 mr-2 mt-1 flex-shrink-0"></i> <span>contacto@ferremax.com</span></p>
                   </div>
              </div>
              <!-- Copyright -->
              <div class="text-center text-gray-500 border-t border-gray-700 mt-8 pt-6 text-sm">
                   &copy; <span id="current-year"></span> Ferremax - Todos los derechos reservados.
              </div>
          </div>
     </footer>

     <!-- CHANGED: Modal para Lightbox/Zoom de Imagen -->
     <div id="image-modal">
         <span class="close-modal">&times;</span>
         <img src="" alt="Imagen Ampliada">
     </div>


    <!-- ====================================================== -->
    <!-- INICIO: JavaScript (Adaptado y Mejorado)               -->
    <!-- ====================================================== -->
    <script>
        "use strict";
        console.log("--- Script Ferremax V19 (Conectado a Render) Iniciado ---");

        // Variables globales para configuración (se llenarán desde el backend)
        let wompiPublicKey = null;
        let frontendBaseUrl = null;
        let configLoaded = false;

        // *** CAMBIO CLAVE: URL del Backend ahora apunta a Render ***
        const API_URL = "https://ferremax-actualizado.onrender.com"; // ¡URL pública de tu backend!

        // Constantes y Variables Globales (DOM, etc.) - Mantenidas y algunas añadidas/modificadas
        const loginSection = document.getElementById("login-section"),
            registerSection = document.getElementById("register-section"),
            mainContent = document.getElementById("main-content"),
            pageContent = document.getElementById("page-content"),
            featuredProductsContainer = document.getElementById("featured-products-container"),
            productsDisplayArea = document.getElementById("products-display-area"), // Para grid/detalle
            contactForm = document.getElementById("contactForm"),
            contactMessageResponseDiv = document.getElementById("contact-message-response"),
            contactSubmitButton = document.getElementById("contactSubmitButton"),
            loginForm = document.getElementById("loginForm"),
            registerForm = document.getElementById("registerForm"),
            logoutButton = document.getElementById("logoutButton"),
            logoutButtonMobile = document.getElementById("logoutButtonMobile"),
            showRegisterLink = document.getElementById("show-register"),
            showLoginLink = document.getElementById("show-login"),
            navLinks = document.querySelectorAll(".admin-nav-item"), // Selector más genérico
            mobileMenuButton = document.getElementById("mobile-menu-button"),
            mobileMenu = document.getElementById("mobile-menu"),
            loginMessageDiv = document.getElementById("login-message"),
            registerMessageDiv = document.getElementById("register-message"),
            categoryGridContainer = document.getElementById('category-grid-container'),
            adminMenuDesktopContainer = document.getElementById('admin-menu-desktop-container'),
            adminMenuDesktopButton = document.getElementById('admin-menu-desktop-button'),
            adminMenuDesktopDropdown = document.getElementById('admin-menu-desktop-dropdown'),
            adminMenuMobileContainer = document.getElementById('admin-menu-mobile-container'),
            adminSectionContainer = document.getElementById('admin-section-container'),
            adminProductsSection = document.getElementById('admin-products-section'),
            adminPersonalizeSection = document.getElementById('admin-personalize-section'),
            adminProductsTableContainer = document.getElementById('admin-products-table-container'),
            adminProductsMessageDiv = document.getElementById('admin-products-message'),
            addProductButton = document.getElementById('add-product-button'),
            adminProductFormContainer = document.getElementById('admin-add-edit-product-form-container'),
            adminProductForm = document.getElementById('admin-product-form'),
            adminCancelButton = document.getElementById('admin-cancel-edit-product'),
            adminProductListContainer = document.getElementById('admin-product-list-container'),
            adminProductFormMessageDiv = document.getElementById('admin-product-form-message'),
            adminCategorySelect = document.getElementById('admin-product-category'),
            adminFormTitle = document.getElementById('admin-form-title'),
            adminProductIdInput = document.getElementById('admin-product-id'),
            adminSaveButton = document.getElementById('admin-save-product-button'),
            adminPersonalizeMessageDiv = document.getElementById('admin-personalize-message'),
            colorPrimaryInput = document.getElementById('setting-colorPrimary'),
            colorSecondaryInput = document.getElementById('setting-colorSecondary'),
            colorAccentInput = document.getElementById('setting-colorAccent'),
            welcomeTitleInput = document.getElementById('setting-welcomeTitle'),
            promoBannerTitleInput = document.getElementById('setting-promoBannerTitle'),
            promoBannerTextInput = document.getElementById('setting-promoBannerText'),
            saveColorsButton = document.getElementById('save-colors-button'),
            saveTextsButton = document.getElementById('save-texts-button'),
            mainWelcomeTitle = document.getElementById('main-welcome-title'),
            mainPromoTitle = document.getElementById('main-promo-title'),
            mainPromoText = document.getElementById('main-promo-text'),
            carouselSlidesContainer = document.querySelector('.carousel-slides'),
            carouselPrevButton = document.querySelector('.carousel-button.prev'),
            carouselNextButton = document.querySelector('.carousel-button.next'),
            cartSection = document.getElementById('cart-section'),
            cartItemsContainer = document.getElementById('cart-items-container'),
            cartSummaryAndCheckout = document.getElementById('cart-summary-and-checkout'),
            cartSubtotalSpan = document.getElementById('cart-subtotal'),
            cartTotalSpan = document.getElementById('cart-total'),
            cartItemCountDesktop = document.getElementById('cart-item-count-desktop'),
            cartItemCountMobileIcon = document.getElementById('cart-item-count-mobile-icon'),
            cartItemCountMobileMenu = document.getElementById('cart-item-count-mobile-menu'),
            checkoutButton = document.getElementById('checkout-button'),
            paymentButtonContainer = document.getElementById('payment-button-container'),
            cartCheckoutMessage = document.getElementById('payment-result-message'), // Reutiliza el message del payment
            cartMessageDiv = document.getElementById('cart-message'), // Mensaje general del carrito
            imageModal = document.getElementById('image-modal'), // CHANGED: Para lightbox
            modalImage = imageModal?.querySelector('img'), // CHANGED: Para lightbox
            closeModalButton = imageModal?.querySelector('.close-modal'), // CHANGED: Para lightbox
            // CHANGED: Añadir referencias a nuevas secciones
            termsSection = document.getElementById('terms-section'),
            faqSection = document.getElementById('faq-section');


        const CART_STORAGE_KEY = 'ferremaxCart';
        let allProducts = [];
        let productsLoaded = false;
        let currentSettings = {}; // Para guardar settings cargados

        // Categorías (igual al archivo 1)
        const categoriesData = [ /* ... (sin cambios) ... */ ];

        // Variables Carrusel (igual al archivo 1)
        let currentSlideIndex = 0;
        let slideInterval;
        const SLIDE_INTERVAL_TIME = 4000;
        let slides = [];

        // --- Funciones Auxiliares (Adaptadas/Mejoradas) ---
        function showMessage(element, message, isError = true) {
            if (!element) { console.warn("showMessage: Elemento nulo."); return; }
            element.textContent = message;
            // Usa las clases CSS del archivo 2 para mensajes
            element.className = `message ${isError ? 'message-error' : 'message-success'} p-4 text-sm rounded-md`; // Clase base + error/success + padding/estilo
            element.style.display = "block";

            // IDs de mensajes que NO deben ocultarse automáticamente
            const persistentIds = [
                "admin-products-message", "admin-product-form-message", "admin-personalize-message",
                "payment-result-message", "cart-message", "login-message", "register-message",
                "contact-message-response" // Añadido para contacto
                ];

            if (!persistentIds.includes(element.id)) {
                setTimeout(() => {
                    // Solo ocultar si todavía muestra el mismo mensaje
                    if (element && element.style.display !== 'none' && element.textContent === message) {
                         // Opcional: fade out
                         // element.style.transition = 'opacity 0.5s ease';
                         // element.style.opacity = '0';
                         // setTimeout(() => element.style.display = 'none', 500);
                         element.style.display = 'none'; // Ocultar directamente
                    }
                }, 4000); // Ocultar después de 4 segundos
            }
        }

        function hideMessages(specificElement = null) {
             // ... (sin cambios funcionales) ...
             if (specificElement) {
                 if (specificElement.style) specificElement.style.display = 'none';
             } else {
                 const messagesToHide = document.querySelectorAll(
                     '#page-content .message, #login-section .message, #register-section .message, #admin-section-container .message'
                 );
                  const persistentIds = [ /* ... (IDs persistentes como en showMessage) ... */ ];
                  messagesToHide.forEach(msg => {
                      if (!persistentIds.includes(msg.id)) {
                          msg.style.display = 'none';
                      }
                  });
             }
        }

        // darkenColor (sin cambios)
        function darkenColor(hex, percent) { /* ... (código sin cambios) ... */ }

        // --- Funciones del Carrito (Adaptadas/Mejoradas) ---
        function getCart() { /* ... (código sin cambios funcionales) ... */ }
        function saveCart(cart) { /* ... (código sin cambios funcionales) ... */ }
        function addToCart(productId, quantity = 1, buttonElement = null) { /* ... (Adaptado para clases de botón archivo 2) ... */ }
        function removeFromCart(productId) { /* ... (código sin cambios funcionales) ... */ }
        function updateCartQuantity(productId, newQuantity) { /* ... (código sin cambios funcionales) ... */ }
        function calculateCartTotals() { /* ... (código sin cambios funcionales) ... */ }
        function updateCartIcon() { /* ... (Adaptado para mostrar/ocultar con inline-block) ... */ }
        function renderCartPage() { /* ... (Adaptado para clases HTML/CSS archivo 2) ... */ }

        // --- Funciones de Renderizado Público (Adaptadas/Mejoradas) ---
        function renderProductCard(product, isFeatured = false) { /* ... (Adaptado para clases HTML/CSS archivo 2) ... */ }
        function renderProductGrid(container) { /* ... (código sin cambios funcionales) ... */ }
        function renderFeaturedProducts(container) { /* ... (código sin cambios funcionales) ... */ }
        function renderProductDetailContent(container, product) {
            // CHANGED: Manejo de múltiples imágenes y lightbox
            if (!container || !product) return;
            container.innerHTML = ""; // Limpiar contenedor

            const detailDiv = document.createElement("div");
            detailDiv.className = "product-detail-container"; // Usa la clase CSS del archivo 2

            const imageURLs = [
                product.imagen_url, product.imagen_url2, product.imagen_url3,
                product.imagen_url4, product.imagen_url5
            ].filter(url => url && url.trim() !== ''); // Filtrar URLs vacías o nulas

            const mainImageUrl = imageURLs[0] || `https://placehold.co/600x400/e2e8f0/475569?text=NI`;
            const imageOnError = `this.onerror=null;this.src='https://placehold.co/600x399/fecaca/b91c1c?text=Err';`;
            const price = typeof product.precio_unitario === 'number' ? `$${product.precio_unitario.toFixed(2)}` : 'N/A';
            const stock = product.cantidad ?? 0;
            const isOutOfStock = stock <= 0;

            let imageSectionHTML = `
                <div class="product-detail-image-container">
                    <div class="product-detail-main-image-wrapper" id="main-image-wrapper">
                        <img src="${mainImageUrl}" class="product-detail-image" id="main-product-image"
                             alt="${product.Nombre || ''}" onerror="${imageOnError}">
                    </div>
            `;

            // Añadir thumbnails si hay más de una imagen
            if (imageURLs.length > 1) {
                imageSectionHTML += `<div class="product-detail-thumbnails">`;
                imageURLs.forEach((url, index) => {
                    imageSectionHTML += `
                        <img src="${url}" class="product-detail-thumbnail ${index === 0 ? 'active' : ''}"
                             alt="Thumbnail ${index + 1}" data-fullimage="${url}" data-index="${index}"
                             onerror="this.style.display='none'">
                    `;
                });
                imageSectionHTML += `</div>`;
            }
            imageSectionHTML += `</div>`; // Cierre de product-detail-image-container

            detailDiv.innerHTML = `
                ${imageSectionHTML}
                <div class="product-detail-info flex-grow">
                    <h3 class="text-2xl lg:text-3xl font-bold text-gray-800 mb-3">${product.Nombre || 'N/A'}</h3>
                    <p class="text-gray-700 mb-4">${product.Descripcion || 'Descripción no disponible.'}</p>
                    <p class="text-sm text-gray-500 mb-2">Disponibles: <span class="font-medium text-gray-700">${stock}</span></p>
                    <p class="text-3xl font-bold product-price mb-6">${price}</p>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <button class="add-to-cart-button w-full sm:w-auto btn ${isOutOfStock ? 'btn-gray cursor-not-allowed' : 'btn-primary'} px-6 py-3" data-product-id-add="${product.ID_Producto}" ${isOutOfStock ? 'disabled title="Sin stock"' : ''}>
                            ${isOutOfStock ? '<i class="fas fa-times-circle mr-2"></i>Sin Stock' : '<i class="fas fa-cart-plus mr-2"></i>Añadir al Carrito'}
                        </button>
                        <button id="back-to-products" class="w-full sm:w-auto btn btn-accent px-6 py-3">
                            <i class="fas fa-arrow-left mr-2"></i>Volver a Productos
                        </button>
                    </div>
                </div>
            `;
            container.appendChild(detailDiv);

            // --- Event Listeners para Galería y Lightbox ---
            const mainImageWrapper = detailDiv.querySelector("#main-image-wrapper");
            const mainImage = detailDiv.querySelector("#main-product-image");
            const thumbnails = detailDiv.querySelectorAll(".product-detail-thumbnail");

            // Cambiar imagen principal al hacer clic en thumbnail
            thumbnails.forEach(thumb => {
                thumb.addEventListener('click', () => {
                    if (mainImage) mainImage.src = thumb.dataset.fullimage;
                    thumbnails.forEach(t => t.classList.remove('active'));
                    thumb.classList.add('active');
                });
            });

            // Abrir modal al hacer clic en imagen principal
            if (mainImageWrapper && imageModal && modalImage && closeModalButton) {
                 mainImageWrapper.addEventListener('click', () => {
                     if (mainImage) modalImage.src = mainImage.src;
                     imageModal.classList.add('active');
                 });
            }
        } // Fin renderProductDetailContent

        function renderProductDetail(container, productId) { /* ... (Llama a renderProductDetailContent, lógica fetch sin cambios) ... */ }
        function renderCategories() { /* ... (Adaptado para clases CSS archivo 2) ... */ }

        // --- Funciones del Carrusel (Adaptadas) ---
        function createCarouselSlides() { /* ... (Adaptado para estructura/clases CSS archivo 2) ... */ }
        function showSlide(index) {
             if (!carouselSlidesContainer || slides.length === 0) return;
             if (index >= slides.length) currentSlideIndex = 0;
             else if (index < 0) currentSlideIndex = slides.length - 1;
             else currentSlideIndex = index;

             // Usar translate para la animación
              const offset = -currentSlideIndex * 100;
              carouselSlidesContainer.style.transform = `translateX(${offset}%)`;

              // Opcional: Actualizar active class si aún se usa para algo más
              // slides.forEach((slide, i) => slide.classList.toggle('active', i === currentSlideIndex));
         }
        function nextSlide() { showSlide(currentSlideIndex + 1); }
        function prevSlide() { showSlide(currentSlideIndex - 1); }
        function startSlideInterval() { stopSlideInterval(); if (slides.length > 1) { slideInterval = setInterval(nextSlide, SLIDE_INTERVAL_TIME); } }
        function stopSlideInterval() { clearInterval(slideInterval); }

        // --- Funciones de Carga de Datos ---
        async function loadAndStorePublicProducts() { /* ... (código sin cambios funcionales) ... */ }
        async function loadSiteSettings() { /* ... (código sin cambios funcionales) ... */ }
        async function loadAdminProducts() { /* ... (código sin cambios funcionales) ... */ }
        async function loadCategoriesIntoSelect() { /* ... (código sin cambios funcionales) ... */ }

        // --- Funciones de Navegación y UI ---
        async function showPageSection(sectionId, detailId = null) {
            console.log(`Nav -> ${sectionId}${detailId ? ` (${detailId})` : ''}`);
            hideMessages(); // Ocultar mensajes no persistentes

             const publicSections = ['home', 'products', 'contact', 'policies', 'cart', 'terms', 'faq']; // CHANGED: Añadir terms y faq
             const adminSubSections = ['admin-products', 'admin-personalize'];
             let needsPublicProducts = ['home', 'products', 'cart'].includes(sectionId) || (sectionId === 'products' && detailId);
             const isAdminSection = adminSubSections.includes(sectionId);

             // Ocultar todas las secciones principales primero
             document.querySelectorAll(
                 '#page-content > div[id$="-section"], #page-content > section[id$="-section"]' // Selecciona divs y sections
             ).forEach(sec => {
                 if (sec) sec.style.display = 'none';
             });
             // Ocultar secciones de login/registro si mainContent está visible
             if (mainContent && mainContent.style.display === 'block') {
                 if (loginSection) loginSection.style.display = 'none';
                 if (registerSection) registerSection.style.display = 'none';
             }
             // Ocultar contenedor admin si no estamos en una sección admin
             if (adminSectionContainer && !isAdminSection) {
                 adminSectionContainer.style.display = "none";
             }
             // Ocultar subsecciones admin específicas
             if(adminProductsSection) adminProductsSection.style.display = "none";
             if(adminPersonalizeSection) adminPersonalizeSection.style.display = "none";


             // --- Cargar Datos Necesarios ---
             let productsOK = true;
             if (needsPublicProducts && !productsLoaded) {
                 console.log(`Cargando productos públicos para ${sectionId}...`);
                 productsOK = await loadAndStorePublicProducts();
             }
             // Cargar settings si se va a Personalizar y no están cargados
             if (sectionId === 'admin-personalize' && (!currentSettings || Object.keys(currentSettings).length === 0)) {
                 console.log("Cargando settings para admin-personalize...");
                 await loadSiteSettings();
             }
              // Cargar productos admin si se va a esa sección
             if (sectionId === 'admin-products') {
                 console.log("Cargando productos para admin-products...");
                 await loadAdminProducts(); // Carga y renderiza la tabla
             }

             // --- Mostrar la Sección Correcta ---
             let sectionToShow;

             if (isAdminSection) {
                 if (adminSectionContainer) adminSectionContainer.style.display = "block";
                 sectionToShow = document.getElementById(`${sectionId}-section`);
                 if (sectionToShow) {
                     sectionToShow.style.display = "block";
                     console.log(`Mostrando sección ADMIN: ${sectionId}`);
                     if (sectionId === 'admin-products') { showAdminProductList(); }
                     else if (sectionId === 'admin-personalize') { populatePersonalizeForm(); }
                 } else {
                     console.warn(`Admin section ${sectionId} not found.`); showPageSection('home');
                 }
              } else if (publicSections.includes(sectionId)) {
                  sectionToShow = document.getElementById(`${sectionId}-section`);
                  if (sectionToShow) {
                       sectionToShow.style.display = "block";
                       console.log(`Mostrando sección pública: ${sectionId}`);
                       if (productsOK || !needsPublicProducts) { // Renderizar si los productos están OK o no se necesitaban
                            switch (sectionId) {
                                case "home":
                                     renderFeaturedProducts(featuredProductsContainer); createCarouselSlides(); renderCategories(); applyTextSettings(currentSettings);
                                     break;
                                case "products":
                                     // Limpiar área antes de renderizar grid o detalle
                                     productsDisplayArea.innerHTML = '';
                                      productsDisplayArea.className = ''; // Resetear clases
                                      if (detailId) {
                                           renderProductDetail(productsDisplayArea, detailId);
                                      } else {
                                           // Asegurar clases de grid
                                           productsDisplayArea.className = "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8";
                                           renderProductGrid(productsDisplayArea);
                                      }
                                      break;
                                case "cart": renderCartPage(); break;
                                // Casos para contact, policies, terms, faq no necesitan renderizado especial aquí
                                case "contact": break;
                                case "policies": break;
                                case "terms": break;
                                case "faq": break;
                           }
                      } else { /* ... (Manejo de error si productsOK es false) ... */ }
                  } else {
                       console.warn(`Public section ${sectionId} not found.`); showPageSection('home');
                  }
             } else {
                 console.warn(`Unknown section ${sectionId}.`); showPageSection('home');
             }

             // Cerrar menú móvil si está abierto
              if (mobileMenu && !mobileMenu.classList.contains('hidden')) { /* ... (código cierre menú móvil) ... */ }
             // Cerrar dropdown admin desktop si está abierto
             if (adminMenuDesktopDropdown && !adminMenuDesktopDropdown.classList.contains('hidden')) { /* ... (código cierre dropdown) ... */ }

             window.scrollTo(0, 0); // Scroll al top
        } // Fin showPageSection

        function updateUI(isLoggedIn) { /* ... (sin cambios funcionales) ... */ }
        async function handleCheckout() { /* ... (Adaptado para spinner archivo 2) ... */ }
        async function loadFrontendConfig() { /* ... (Adaptado para mensajes de error archivo 2) ... */ }

        // --- Funciones Admin (Adaptadas/Mejoradas) ---
        function renderAdminProductTable(products) { /* ... (Adaptado para clases CSS archivo 2) ... */ }
        function showAdminProductForm(product = null) {
             // CHANGED: Poblar/Limpiar todos los campos de imagen
             if (!adminProductFormContainer || !adminProductListContainer) { console.error("Admin form/list containers missing."); return; }
             adminProductListContainer.style.display = 'none';
             adminProductFormContainer.style.display = 'block';
             hideMessages(adminProductFormMessageDiv);
             loadCategoriesIntoSelect();

             if (product) { // Editar
                 adminFormTitle.textContent = 'Editar Producto';
                 adminSaveButton.textContent = 'Actualizar';
                 adminProductIdInput.value = product.ID_Producto;
                 // Llenar campos (usando IDs)
                 document.getElementById('admin-product-name').value = product.Nombre || "";
                 document.getElementById('admin-product-brand').value = product.Marca || "";
                 document.getElementById('admin-product-price').value = product.precio_unitario ?? "";
                 document.getElementById('admin-product-quantity').value = product.cantidad ?? "";
                 document.getElementById('admin-product-description').value = product.Descripcion || "";
                 document.getElementById('admin-product-category').value = product.ID_Categoria || "";
                 document.getElementById('admin-product-barcode').value = product.Codigo_Barras || "";
                 // Llenar URLs de imagen
                 document.getElementById('admin-product-image-url').value = product.imagen_url || "";
                 document.getElementById('admin-product-image-url2').value = product.imagen_url2 || "";
                 document.getElementById('admin-product-image-url3').value = product.imagen_url3 || "";
                 document.getElementById('admin-product-image-url4').value = product.imagen_url4 || "";
                 document.getElementById('admin-product-image-url5').value = product.imagen_url5 || "";
                 console.log("Admin form populated for edit ID:", product.ID_Producto);
             } else { // Añadir
                 adminFormTitle.textContent = 'Añadir Nuevo Producto';
                 adminSaveButton.textContent = 'Guardar';
                 if (adminProductForm) adminProductForm.reset(); // Limpiar form
                 adminProductIdInput.value = ""; // Asegurar ID vacío
                  // Limpiar explícitamente URLs por si reset no lo hace bien con type="url"
                  ['url', 'url2', 'url3', 'url4', 'url5'].forEach(suffix => {
                      const input = document.getElementById(`admin-product-image-${suffix}`);
                      if (input) input.value = '';
                  });
                 console.log("Admin form cleared for add.");
             }
         }
        async function handleEditProduct(productId) { /* ... (Asegura tipos antes de llamar showAdminProductForm) ... */ }
        function showAdminProductList() { /* ... (sin cambios funcionales) ... */ }
        async function handleDeleteProduct(productId) { /* ... (código sin cambios funcionales) ... */ }

        // --- Funciones de Personalización ---
        function applySiteSettings() { /* ... (Adaptado a colores/textos archivo 2) ... */ }
        function applyColorSettings(settings) { /* ... (Adaptado a colores archivo 2) ... */ }
        function applyTextSettings(settings) { /* ... (Adaptado a textos archivo 2 y IDs) ... */ }
        function populatePersonalizeForm() { /* ... (Adaptado a fallbacks archivo 2) ... */ }
        async function saveSiteSettings(settingsToSave) { /* ... (Adaptado para spinner archivo 2) ... */ }

        // --- Manejadores de Eventos ---
        function handleLogout() { /* ... (sin cambios funcionales) ... */ }
        function handleCategoryClick(event) { /* ... (sin cambios funcionales) ... */ }
        function handleGridOrDetailClick(event) { /* ... (sin cambios funcionales) ... */ }

        // --- Lógica de Inicialización ---
        document.addEventListener("DOMContentLoaded", async () => {
            console.log(">>> DOM Cargado. Iniciando App V19 (Conectado a Render)...");
            try {
                // --- 0. Cargar configuración del frontend ANTES que nada ---
                await loadFrontendConfig(); // Esperar config (Wompi Key, Base URL)

                // --- Limpieza inicial de carrito inválido ---
                try { /* ... (código limpieza carrito) ... */ } catch (e) { /* ... */ }

                // --- Actualizar año en footer ---
                const currentYearSpan = document.getElementById("current-year");
                if (currentYearSpan) currentYearSpan.textContent = new Date().getFullYear();

                // --- Verificar estado de login ---
                const isLoggedIn = localStorage.getItem("userLoggedIn") === "true";
                console.log(">>> Estado Login Inicial:", isLoggedIn);

                 // --- 1. Cargar Settings del Sitio (Colores, Textos) ---
                 console.log(">>> 1. Cargando Settings...");
                 await loadSiteSettings(); // Carga y aplica settings (o fallbacks)

                 // --- 2. Actualizar UI Base (Mostrar/Ocultar secciones login/main) ---
                 console.log(">>> 2. Actualizando UI Base...");
                 updateUI(isLoggedIn); // Aplica estado inicial LoggedIn/Out

                // --- 3. Actualizar Icono Carrito ---
                console.log(">>> 3. Actualizando Icono Carrito...");
                updateCartIcon();

                // --- 4. Añadir Listeners Principales ---
                console.log(">>> 4. Añadiendo Listeners...");

                // Login Form
                if (loginForm) loginForm.addEventListener("submit", async (event) => { /* ... (Adaptado para spinner archivo 2) ... */ });
                // Register Form
                if (registerForm) registerForm.addEventListener("submit", async (event) => { /* ... (Adaptado para spinner archivo 2) ... */ });
                // Contact Form
                if (contactForm) contactForm.addEventListener("submit", async (event) => { /* ... (Adaptado para spinner archivo 2) ... */ });
                // Logout Buttons
                if (logoutButton) logoutButton.addEventListener("click", handleLogout);
                if (logoutButtonMobile) logoutButtonMobile.addEventListener("click", handleLogout);
                // Links para mostrar Login/Register
                if (showRegisterLink) showRegisterLink.addEventListener("click", (event) => { /* ... */ });
                if (showLoginLink) showLoginLink.addEventListener("click", (event) => { /* ... */ });
                // Navegación principal y admin
                navLinks.forEach(link => link.addEventListener("click", (event) => { /* ... */ }));
                 // Botón CTA del banner promocional
                 const promoBtn = document.querySelector('.promo-banner .cta-button');
                 if (promoBtn) promoBtn.addEventListener('click', (e) => { /* ... */ });
                // Menú Móvil Toggle
                if (mobileMenuButton && mobileMenu) { mobileMenuButton.addEventListener("click", () => { /* ... */ }); }
                 // Admin Dropdown Desktop
                 if (adminMenuDesktopButton && adminMenuDesktopDropdown) { /* ... (Listeners para toggle y cierre) ... */ }
                // Click en Grid de Productos o Detalle (para añadir o ver detalle)
                if (pageContent) pageContent.addEventListener('click', handleGridOrDetailClick);
                 // Cambios en Cantidad del Carrito (delegación)
                 if (cartItemsContainer) { cartItemsContainer.addEventListener('change', (e) => { /* ... (listener para input cantidad) ... */ }); }
                 // Click en botón eliminar del carrito (delegación)
                 if (cartItemsContainer) { cartItemsContainer.addEventListener('click', (e) => { /* ... (listener para botón eliminar) ... */ }); }
                 // Click en Categorías (delegación - ya añadido en renderCategories)
                 // Botón Checkout
                 if (checkoutButton) checkoutButton.addEventListener('click', handleCheckout);
                 // Botones Admin: Añadir, Cancelar Edición
                 if (addProductButton) addProductButton.addEventListener('click', () => showAdminProductForm());
                 if (adminCancelButton) adminCancelButton.addEventListener('click', showAdminProductList);
                 // Submit Formulario Admin Productos
                 if (adminProductForm) adminProductForm.addEventListener('submit', async (event) => { /* ... (Adaptado para spinner y validación frontend) ... */ });
                 // Botones Guardar Personalización
                 if (saveColorsButton) saveColorsButton.addEventListener('click', () => { /* ... */ });
                 if (saveTextsButton) saveTextsButton.addEventListener('click', () => { /* ... */ });
                  // Listeners Carrusel
                  if (carouselPrevButton) carouselPrevButton.addEventListener('click', () => { prevSlide(); stopSlideInterval(); });
                  if (carouselNextButton) carouselNextButton.addEventListener('click', () => { nextSlide(); stopSlideInterval(); });
                  if (carouselSlidesContainer) { // Reanudar al salir del carrusel
                       carouselSlidesContainer.addEventListener('mouseenter', stopSlideInterval);
                       carouselSlidesContainer.addEventListener('mouseleave', startSlideInterval);
                  }
                 // CHANGED: Listeners para cerrar el modal lightbox
                 if (closeModalButton) closeModalButton.addEventListener('click', () => imageModal.classList.remove('active'));
                 if (imageModal) imageModal.addEventListener('click', (e) => { if (e.target === imageModal) imageModal.classList.remove('active'); }); // Cierra al hacer clic fuera de la imagen


                 // --- 5. Mostrar Sección Inicial ---
                 console.log(">>> 5. Mostrando Sección Inicial...");
                 if (isLoggedIn) {
                     await showPageSection("home"); // Muestra Home si está logueado
                 } else {
                     // UI ya muestra login por defecto si no está logueado (ver updateUI)
                     console.log(">>> Mostrando sección de Login (usuario no logueado).");
                      if(loginSection) loginSection.style.display = 'block';
                      if(registerSection) registerSection.style.display = 'none';
                      if(mainContent) mainContent.style.display = 'none';
                 }

                console.log(">>> INICIALIZACIÓN COMPLETA (V19 - Conectado a Render) <<<");

            } catch (error) {
                // --- Error Crítico Durante Inicialización ---
                console.error("!!! ERROR CRÍTICO DURANTE LA INICIALIZACIÓN !!!", error);
                 // Mostrar mensaje de error que reemplace todo el body
                 document.body.innerHTML = `... (Mensaje de error crítico HTML) ...`; // Como en el original
            }
        }); // Fin DOMContentLoaded

        console.log("--- Script Ferremax V19 (Conectado a Render) Cargado ---");
    </script>
    <!-- ====================================================== -->
    <!-- FIN: JavaScript                                        -->
    <!-- ====================================================== -->
</body>
</html>